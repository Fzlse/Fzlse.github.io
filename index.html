<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portofolio - Muhammad Andra Ramadhani</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <nav>
      <div class="logo" data-lang-id="site-title">Portofolio Muhammad Andra Ramadhani</div>
      <div class="nav-links">
        <a href="#about" data-lang-id="nav-about">Tentang</a>
        <a href="#projects" data-lang-id="nav-projects">Proyek</a>
        <a href="#contact" data-lang-id="nav-contact">Kontak</a>
      </div>
      <button class="lang-toggle" id="langToggle">EN</button>
    </nav>
  </header>

  <section class="hero" id="top">
    <div class="hero-left">
      <div class="hero-tag" data-lang-id="hero-tag">Halo, saya Andra</div>
      <h1 data-lang-id="hero-title">Game Programmer & Mahasiswa Game Technology</h1>
      <p data-lang-id="hero-desc">
        Saya berfokus pada pengembangan game menggunakan Unity dan C#. Saya tertarik pada sistem gameplay, mekanika interaktif, serta optimalisasi performa game.
      </p>
      <div class="hero-buttons">
        <a href="#projects" class="btn-primary" data-lang-id="btn-projects">Lihat Proyek</a>
        <a href="#contact" class="btn-secondary" data-lang-id="btn-contact">Hubungi Saya</a>
      </div>
    </div>
    <div class="hero-card float-in">
      <h2 data-lang-id="skill-title">Keahlian Utama</h2>
      <div class="stat-list">
        <div class="stat">
          <div class="label" data-lang-id="skill-1-label">Engine</div>
          <div class="value">Unity (2D/3D)</div>
        </div>
        <div class="stat">
          <div class="label" data-lang-id="skill-2-label">Peran</div>
          <div class="value" data-lang-id="skill-2-value">Game Programmer</div>
        </div>
        <div class="stat">
          <div class="label" data-lang-id="skill-3-label">Bahasa</div>
          <div class="value">C#, C++</div>
        </div>
      </div>
    </div>
  </section>

  <section id="about">
    <div class="about fade-section">
      <h2 class="section-title" data-lang-id="about-title">Tentang Saya</h2>
      <p class="muted" data-lang-id="about-desc">
        Nama saya <strong>Muhammad Andra Ramadhani</strong>, seorang mahasiswa Game Technology dengan spesialisasi sebagai <em>Game Programmer</em>. Saya memiliki ketertarikan tinggi terhadap pengembangan sistem permainan, AI sederhana, dan integrasi data menggunakan Unity dan C#. Saya juga aktif mengerjakan berbagai proyek kolaboratif untuk memperdalam pemahaman tentang pengembangan game secara profesional.
      </p>
    </div>

    <h3 class="section-title" data-lang-id="skilltools-title">Kemampuan & Perangkat yang Dikuasai</h3>
    <p class="muted" data-lang-id="skilltools-desc">
      Berikut beberapa teknologi dan alat yang sering saya gunakan dalam pengembangan game:
    </p>
    <div class="skills-grid">
      <span class="skill-pill">Unity Engine</span>
      <span class="skill-pill">C# Programming</span>
      <span class="skill-pill">Git & GitHub</span>
    </div>
  </section>

  <section id="projects">
    <h2 class="section-title" data-lang-id="projects-title">Proyek Saya</h2>
    <p class="muted" data-lang-id="projects-desc">
      Beberapa proyek berikut merupakan hasil pembelajaran dan eksplorasi saya dalam pengembangan game menggunakan Unity.
    </p>

    <!-- PROYEK GAME JAM -->
    <h3 class="section-subtitle">Proyek Game Jam</h3>
    <p class="muted small-note">
      Proyek yang dikerjakan dalam waktu terbatas bersama tim, fokus pada ide dan eksekusi cepat.
    </p>
    <div class="projects-grid-single">

      <!-- GAME JAM: Koper Pulang -->
      <div class="project-card reveal"
           data-link="https://radenharza.itch.io/koper-pulang"
           data-images="images/koper.png">
        <span class="project-badge">Game Jam</span>
        <img src="images/koper.png" alt="Koper Pulang" class="project-img" loading="lazy">
        <small>Unity • Puzzle</small>
        <p class="project-role">Role: Gameplay & Interaction Programmer</p>
        <h3>Koper Pulang</h3>
        <p data-lang-id="proj-koper">
          Game puzzle interaktif di mana pemain menata barang ke dalam koper menggunakan sistem raycast dan grid. Saya mengimplementasikan sistem penataan, sistem snap grid, dan interaksi objek sebagai programmer gameplay utama.
        </p>
        <!-- detail kontribusi untuk modal -->
        <ul class="project-detail">
          <li data-lang-id="koper-detail-1">Mengimplementasikan sistem raycast untuk memilih dan memindahkan item di dalam koper.</li>
          <li data-lang-id="koper-detail-2">Mendesain dan mengkode sistem grid snapping agar penataan terasa rapi dan responsif.</li>
          <li data-lang-id="koper-detail-3">Bekerja sama dengan tim desain untuk menyesuaikan feel interaksi drag &amp; drop.</li>
        </ul>
        <a class="project-external" href="https://radenharza.itch.io/koper-pulang" target="_blank" rel="noopener noreferrer">Buka di itch.io</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

      <!-- GAME JAM: Ber-Ingin (Jam version) -->
      <div class="project-card reveal"
           data-link="https://campur-studio.itch.io/beringin"
           data-images="images/beringin_demo.png">
        <span class="project-badge">Game Jam</span>
        <img src="images/beringin_demo.png" alt="Ber-Ingin (Game Jam Version)" class="project-img" loading="lazy">
        <small>Unity • Narrative</small>
        <p class="project-role">Role: Narrative & Interaction Systems Programmer</p>
        <h3>Ber-Ingin (Game Jam Version)</h3>
        <p data-lang-id="proj-beringin">
          Game naratif 2D bergaya side-scrolling dengan gaya pixel art yang berfokus pada cerita dan interaksi karakter. Saya mengembangkan sistem dialog, trigger interaksi, dan alur quest sederhana untuk mendukung penyampaian cerita.
        </p>
        <ul class="project-detail">
          <li data-lang-id="beringinjam-detail-1">Membuat sistem dialog berbasis trigger untuk memicu percakapan di titik-titik tertentu.</li>
          <li data-lang-id="beringinjam-detail-2">Mengatur interaksi objek lingkungan (NPC, objek penting) yang terkait dengan alur cerita.</li>
          <li data-lang-id="beringinjam-detail-3">Berkoordinasi dengan penulis cerita untuk menjaga pacing dan flow naratif.</li>
        </ul>
        <a class="project-external" href="https://campur-studio.itch.io/beringin" target="_blank" rel="noopener noreferrer">Buka di itch.io</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

    </div>

    <!-- PROYEK KULIAH & EKSPLORASI -->
    <h3 class="section-subtitle">Proyek Kuliah & Eksplorasi Pribadi</h3>
    <p class="muted small-note">
      Proyek yang saya kerjakan sebagai tugas kuliah maupun latihan mandiri untuk memperdalam pemahaman teknis.
    </p>
    <div class="projects-grid">

      <!-- Project Avatar -->
      <div class="project-card reveal"
           data-link="https://fzlse.itch.io/pak-ustadz-adventure"
           data-images="images/avatar.png">
        <img src="images/avatar.png" alt="Project Avatar" class="project-img" loading="lazy">
        <small>Unity • Platformer</small>
        <p class="project-role">Role: Core Gameplay & Systems Programmer</p>
        <h3>Project Avatar</h3>
        <p data-lang-id="proj-avatar">
          Game 2D bertema endless runner dengan mekanik lompat, dash, dan tembak. Saya bertanggung jawab dalam pengembangan sistem inti, pengaturan mekanik permainan, serta integrasi skor dan leaderboard sederhana.
        </p>
        <ul class="project-detail">
          <li data-lang-id="avatar-detail-1">Mengembangkan controller karakter (movement, jump, dash, dan shooting).</li>
          <li data-lang-id="avatar-detail-2">Mendesain sistem skor dan integrasi leaderboard lokal untuk menyimpan skor tertinggi.</li>
          <li data-lang-id="avatar-detail-3">Mengatur struktur scene dan alur permainan (game over, restart, dan UI dasar).</li>
        </ul>
        <a class="project-external" href="https://fzlse.itch.io/pak-ustadz-adventure" target="_blank" rel="noopener noreferrer">Buka di itch.io</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

      <!-- Ber-Ingin (Kuliah/Narrative project) -->
      <div class="project-card reveal"
           data-link="https://radenharza.itch.io/beringin"
           data-images="images/beringin.jpg">
        <img src="images/beringin.jpg" alt="Ber-Ingin" class="project-img" loading="lazy">
        <small>Unity • Narrative</small>
        <p class="project-role">Role: Narrative & Interaction Systems Programmer</p>
        <h3>Ber-Ingin</h3>
        <p data-lang-id="proj-beringin">
          Game naratif 2D bergaya side-scrolling yang berfokus pada cerita dan interaksi karakter. Saya mengembangkan sistem dialog, trigger interaksi, dan alur quest sederhana untuk mendukung penyampaian cerita.
        </p>
        <ul class="project-detail">
          <li data-lang-id="beringin-detail-1">Membuat sistem percabangan dialog sederhana untuk beberapa kondisi cerita.</li>
          <li data-lang-id="beringin-detail-2">Menghubungkan state quest dengan interaksi pemain dan progress cerita.</li>
          <li data-lang-id="beringin-detail-3">Mengatur transisi antar scene/area yang relevan dengan perkembangan naratif.</li>
        </ul>
        <a class="project-external" href="https://radenharza.itch.io/beringin" target="_blank" rel="noopener noreferrer">Buka di itch.io</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

      <!-- Zera Venture -->
      <div class="project-card reveal"
           data-link="https://fzlse.itch.io/zera-venture"
           data-images="images/zera.png">
        <img src="images/zera.png" alt="Zera Venture" class="project-img" loading="lazy">
        <small>Unity • Idle Game</small>
        <p class="project-role">Role: Systems & Economy Programmer</p>
        <h3>Zera Venture</h3>
        <p data-lang-id="proj-zera">
          Game idle tycoon sederhana bertema mahasiswa IT yang membangun studio game. Proyek ini saya gunakan untuk memahami alur ekonomi sederhana dalam game, sistem upgrade, dan loop progres yang bertahap.
        </p>
        <ul class="project-detail">
          <li data-lang-id="zera-detail-1">Mendesain loop ekonomi dasar (income, upgrade, dan progres pasif).</li>
          <li data-lang-id="zera-detail-2">Mengimplementasikan sistem upgrade bertahap yang mempengaruhi income pemain.</li>
          <li data-lang-id="zera-detail-3">Menguji balancing awal untuk memastikan progres terasa bertahap namun tidak terlalu lambat.</li>
        </ul>
        <a class="project-external" href="https://fzlse.itch.io/zera-venture" target="_blank" rel="noopener noreferrer">Buka di itch.io</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

    </div>

    <!-- ONGOING PROJECT -->
    <h3 class="section-subtitle">Ongoing Project</h3>
    <p class="muted small-note">
      Proyek yang masih dalam tahap pengembangan dan terus diperbarui.
    </p>

    <div class="projects-grid-single">

      <div class="project-card reveal"
           data-link="https://github.com/Syafiqqand/Biken"
           data-images="images/bikend.png">
        <img src="images/bikend.png" alt="Bikend" class="project-img" loading="lazy">
        <small>Unity • Turn Based Tactical • On-going</small>
        <p class="project-role">Role: AI Programmer (Combat & Enemy AI)</p>
        <h3>Bikend</h3>
        <p data-lang-id="proj-bikend">
          Game strategi berbasis giliran yang menekankan pengaturan unit dan manajemen sumber daya. Saya berperan sebagai programmer utama untuk sistem pertarungan, logika turn-based, dan integrasi Behavior Tree untuk AI musuh.
        </p>
        <ul class="project-detail">
          <li data-lang-id="bikend-detail-1">Mengimplementasikan sistem turn-based (player turn vs enemy turn) yang konsisten.</li>
          <li data-lang-id="bikend-detail-2">Membangun AI musuh menggunakan pendekatan Behavior Tree untuk pergerakan dan penyerangan.</li>
          <li data-lang-id="bikend-detail-3">Bekerja bersama tim untuk menguji balancing awal dan flow pertempuran.</li>
        </ul>
        <a class="project-external" href="https://github.com/Syafiqqand/Biken" target="_blank" rel="noopener noreferrer">Buka di GitHub</a>
        <span class="sr-only" data-lang-id="proj-detail">Lihat detail →</span>
      </div>

    </div>

  </section>

  <section id="contact">
    <div class="contact-box fade-section">
      <h2 class="section-title" data-lang-id="contact-title">Kontak & Media Sosial</h2>
      <p class="muted" data-lang-id="contact-desc">Silakan hubungi saya melalui salah satu kanal berikut:</p>
      <div class="contact-links">
        <a href="mailto:andratml3@gmail.com" id="emailLink">Email</a>
        <a href="https://github.com/Fzlse" target="_blank">GitHub</a>
        <a href="https://fzlse.itch.io" target="_blank">Itch.io</a>
        <a href="https://www.linkedin.com/in/muhammad-andra-ramadhani-334694357/" target="_blank">LinkedIn</a>
      </div>
    </div>
  </section>

  <footer>
    © 2025 Muhammad Andra Ramadhani. All rights reserved.
  </footer>

  <script>
    // scroll reveal sederhana
    const reveals = document.querySelectorAll('.reveal, .fade-section');
    const onScroll = () => {
      const trigger = window.innerHeight * 0.85;
      reveals.forEach(el => {
        const top = el.getBoundingClientRect().top;
        if (top < trigger) el.classList.add('show');
      });
    };
    document.addEventListener('scroll', onScroll);
    onScroll();

    // toggle bahasa
    const langToggle = document.getElementById('langToggle');
    let currentLang = 'id';

    const langMap = {
      id: {
        "site-title": "Portofolio Muhammad Andra Ramadhani",
        "nav-about": "Tentang",
        "nav-projects": "Proyek",
        "nav-contact": "Kontak",
        "hero-tag": "Halo, saya Andra",
        "hero-title": "Game Programmer & Mahasiswa Game Technology",
        "hero-desc": "Saya berfokus pada pengembangan game menggunakan Unity dan C#. Saya tertarik pada sistem gameplay, mekanika interaktif, serta optimalisasi performa game.",
        "btn-projects": "Lihat Proyek",
        "btn-contact": "Hubungi Saya",
        "skill-title": "Keahlian Utama",
        "skill-1-label": "Engine",
        "skill-2-label": "Peran",
        "skill-2-value": "Game Programmer",
        "skill-3-label": "Bahasa",
        "about-title": "Tentang Saya",
        "about-desc": "Nama saya <strong>Muhammad Andra Ramadhani</strong>, seorang mahasiswa Game Technology dengan spesialisasi sebagai <em>Game Programmer</em>. Saya memiliki ketertarikan tinggi terhadap pengembangan sistem permainan, AI sederhana, dan integrasi data menggunakan Unity dan C#. Saya juga aktif mengerjakan berbagai proyek kolaboratif untuk memperdalam pemahaman tentang pengembangan game secara profesional.",
        "skilltools-title": "Kemampuan & Perangkat yang Dikuasai",
        "skilltools-desc": "Berikut beberapa teknologi dan alat yang sering saya gunakan dalam pengembangan game:",
        "projects-title": "Proyek Saya",
        "projects-desc": "Beberapa proyek berikut merupakan hasil pembelajaran dan eksplorasi saya dalam pengembangan game menggunakan Unity.",
        "proj-avatar": "Game 2D bertema endless runner dengan mekanik lompat, dash, dan tembak. Saya bertanggung jawab dalam pengembangan sistem inti dan pengaturan mekanik permainan.",
        "proj-koper": "Game puzzle interaktif di mana pemain menata barang ke dalam koper menggunakan sistem raycast dan grid. Saya mengimplementasikan sistem penataan serta interaksi objek.",
        "proj-beringin": "Game naratif 2D bergaya side-scrolling yang berfokus pada cerita dan interaksi karakter. Saya mengembangkan sistem dialog, quest, dan interaksi objek dinamis.",
        "proj-zera": "Game idle tycoon sederhana bertema mahasiswa IT yang membangun studio game. Proyek ini saya gunakan sebagai media untuk memahami alur ekonomi sederhana dalam game.",
        "proj-bikend": "Game strategi berbasis giliran yang menekankan pengaturan unit dan manajemen sumber daya. Saya berperan sebagai programmer utama untuk sistem pertarungan dan logika permainan.",
        "proj-detail": "Lihat detail →",
        "contact-title": "Kontak & Media Sosial",
        "contact-desc": "Silakan hubungi saya melalui salah satu kanal berikut:",

        /* Detail kontribusi (ID) */
        "koper-detail-1": "Mengimplementasikan sistem raycast untuk memilih dan memindahkan item di dalam koper.",
        "koper-detail-2": "Mendesain dan mengkode sistem grid snapping agar penataan terasa rapi dan responsif.",
        "koper-detail-3": "Bekerja sama dengan tim desain untuk menyesuaikan feel interaksi drag &amp; drop.",
        "beringinjam-detail-1": "Membuat sistem dialog berbasis trigger untuk memicu percakapan di titik-titik tertentu.",
        "beringinjam-detail-2": "Mengatur interaksi objek lingkungan (NPC, objek penting) yang terkait dengan alur cerita.",
        "beringinjam-detail-3": "Berkoordinasi dengan penulis cerita untuk menjaga pacing dan flow naratif.",
        "avatar-detail-1": "Mengembangkan controller karakter (movement, jump, dash, dan shooting).",
        "avatar-detail-2": "Mendesain sistem skor dan integrasi leaderboard lokal untuk menyimpan skor tertinggi.",
        "avatar-detail-3": "Mengatur struktur scene dan alur permainan (game over, restart, dan UI dasar).",
        "beringin-detail-1": "Membuat sistem percabangan dialog sederhana untuk beberapa kondisi cerita.",
        "beringin-detail-2": "Menghubungkan state quest dengan interaksi pemain dan progress cerita.",
        "beringin-detail-3": "Mengatur transisi antar scene/area yang relevan dengan perkembangan naratif.",
        "zera-detail-1": "Mendesain loop ekonomi dasar (income, upgrade, dan progres pasif).",
        "zera-detail-2": "Mengimplementasikan sistem upgrade bertahap yang mempengaruhi income pemain.",
        "zera-detail-3": "Menguji balancing awal untuk memastikan progres terasa bertahap namun tidak terlalu lambat.",
        "bikend-detail-1": "Mengimplementasikan sistem turn-based (player turn vs enemy turn) yang konsisten.",
        "bikend-detail-2": "Membangun AI musuh menggunakan pendekatan Behavior Tree untuk pergerakan dan penyerangan.",
        "bikend-detail-3": "Bekerja bersama tim untuk menguji balancing awal dan flow pertempuran."
      },
      en: {
        "site-title": "Portfolio of Muhammad Andra Ramadhani",
        "nav-about": "About",
        "nav-projects": "Projects",
        "nav-contact": "Contact",
        "hero-tag": "Hi, I'm Andra",
        "hero-title": "Game Programmer & Game Technology Student",
        "hero-desc": "I focus on game development using Unity and C#, with a strong interest in gameplay systems, interactive mechanics, and performance optimization.",
        "btn-projects": "View Projects",
        "btn-contact": "Contact Me",
        "skill-title": "Core Skills",
        "skill-1-label": "Engine",
        "skill-2-label": "Role",
        "skill-2-value": "Game Programmer",
        "skill-3-label": "Languages",
        "about-title": "About Me",
        "about-desc": "My name is <strong>Muhammad Andra Ramadhani</strong>, a Game Technology student specializing as a <em>Game Programmer</em>. I have a strong interest in building gameplay systems, simple AI, and data integration using Unity and C#. I also actively work on collaborative projects to gain more experience in professional game development.",
        "skilltools-title": "Skills & Tools",
        "skilltools-desc": "Here are several technologies and tools I frequently use in game development:",
        "projects-title": "My Projects",
        "projects-desc": "The projects below represent a mix of coursework and personal experiments as I learn and explore game development with Unity.",
        "proj-avatar": "A 2D endless-runner/platformer with jump, dash, and shooting mechanics. I handled the core gameplay systems, player controller, and a simple score and leaderboard integration.",
        "proj-koper": "An interactive suitcase-packing puzzle created for a game jam. Players arrange items inside a suitcase using raycast and grid-based snapping. I implemented the placement system, snapping logic, and core object interactions as the main gameplay programmer.",
        "proj-beringin": "A 2D narrative side-scrolling game focused on story and character interactions. I worked on the dialogue system, interaction triggers, and a simple quest flow to support the narrative.",
        "proj-zera": "A simple idle-tycoon game about an IT student building a game studio. I used this project to explore basic in-game economy loops, upgrade systems, and gradual player progression.",
        "proj-bikend": "A turn-based tactical game that emphasizes unit positioning and resource planning. I serve as the main programmer for the turn system, combat logic, and enemy AI using a behavior-tree approach.",
        "proj-detail": "View details →",
        "contact-title": "Contact & Socials",
        "contact-desc": "You can reach me through any of the channels below:",

        /* Detail kontribusi (EN) */
        "koper-detail-1": "Implemented the raycast system to select and move items inside the suitcase.",
        "koper-detail-2": "Designed and coded the grid-snapping system so placements feel neat and responsive.",
        "koper-detail-3": "Collaborated with the design team to fine-tune the drag &amp; drop interaction feel.",
        "beringinjam-detail-1": "Built a trigger-based dialogue system to start conversations at specific points.",
        "beringinjam-detail-2": "Set up interactions with environment objects (NPCs and key props) tied to the story flow.",
        "beringinjam-detail-3": "Coordinated with the writer to keep pacing and narrative flow consistent.",
        "avatar-detail-1": "Developed the character controller (movement, jump, dash, and shooting).",
        "avatar-detail-2": "Designed the scoring system and local leaderboard integration to store high scores.",
        "avatar-detail-3": "Organized scene structure and game flow (game over, restart, and basic UI).",
        "beringin-detail-1": "Created a simple branching dialogue system for different story conditions.",
        "beringin-detail-2": "Linked quest state with player interactions and story progression.",
        "beringin-detail-3": "Managed transitions between scenes/areas that reflect narrative progression.",
        "zera-detail-1": "Designed the basic economy loop (income, upgrades, and passive progress).",
        "zera-detail-2": "Implemented a step-by-step upgrade system that affects the player's income.",
        "zera-detail-3": "Performed early balancing tests so progression feels gradual but not too slow.",
        "bikend-detail-1": "Implemented a consistent turn-based system (player turns versus enemy turns).",
        "bikend-detail-2": "Built enemy AI using a behavior-tree approach for movement and attacking decisions.",
        "bikend-detail-3": "Collaborated with the team to test early balancing and overall combat flow."
      }
    };

    function applyLang(lang) {
      const elements = document.querySelectorAll('[data-lang-id]');
      elements.forEach(el => {
        const key = el.getAttribute('data-lang-id');
        const str = langMap[lang][key];
        if (str !== undefined) {
          el.innerHTML = str;
        }
      });
    }

    langToggle.addEventListener('click', () => {
      currentLang = currentLang === 'id' ? 'en' : 'id';
      applyLang(currentLang);
      langToggle.textContent = currentLang === 'id' ? 'EN' : 'ID';
      document.documentElement.lang = currentLang;
    });

    // project cards + modal with gallery
    const projectCards = document.querySelectorAll('.project-card');
    const modalOverlay = document.createElement('div');
    modalOverlay.className = 'modal-overlay';
    modalOverlay.innerHTML = `
      <div class="modal" role="dialog" aria-modal="true">
        <div class="modal-header">
          <h3 id="modalTitle"></h3>
          <button class="modal-close" aria-label="Close">✕</button>
        </div>
        <div class="modal-body">
          <div class="modal-image-wrap">
            <button class="modal-nav modal-prev" aria-label="Previous screenshot">‹</button>
            <img id="modalImg" src="" alt="" />
            <button class="modal-nav modal-next" aria-label="Next screenshot">›</button>
          </div>
          <div class="modal-meta">
            <p id="modalDesc"></p>
            <div id="modalStack"></div>
            <div id="modalCounter" class="modal-counter"></div>
            <a id="modalExternal" class="project-external-link" href="#" target="_blank" rel="noopener noreferrer">Buka</a>
          </div>
        </div>
      </div>`;
    document.body.appendChild(modalOverlay);

    let galleryImages = [];
    let galleryIndex = 0;

    function updateModalImage() {
      const imgEl = document.getElementById('modalImg');
      const counterEl = document.getElementById('modalCounter');

      if (!galleryImages.length) {
        imgEl.style.display = 'none';
        if (counterEl) counterEl.textContent = '';
        return;
      }

      imgEl.style.display = '';
      imgEl.src = galleryImages[galleryIndex];
      if (counterEl) {
        counterEl.textContent = (galleryIndex + 1) + ' / ' + galleryImages.length;
      }
    }

    function openModal(data){
      document.getElementById('modalTitle').textContent = data.title;
      const img = document.getElementById('modalImg');
      img.alt = data.imgAlt || data.title + ' screenshot';

      galleryImages = data.images && data.images.length ? data.images : (data.imgSrc ? [data.imgSrc] : []);
      galleryIndex = 0;
      updateModalImage();

      document.getElementById('modalDesc').innerHTML = data.desc;
      document.getElementById('modalStack').textContent = data.stack || '';
      const ext = document.getElementById('modalExternal');
      ext.href = data.link;
      ext.textContent = data.externalText || 'Buka di sumber';
      modalOverlay.style.display = 'flex';
      modalOverlay.querySelector('.modal-close').focus();
    }

    function closeModal(){ modalOverlay.style.display = 'none'; }

    modalOverlay.addEventListener('click', (e)=>{ if (e.target === modalOverlay) closeModal(); });
    modalOverlay.querySelector('.modal-close').addEventListener('click', closeModal);

    const prevBtn = modalOverlay.querySelector('.modal-prev');
    const nextBtn = modalOverlay.querySelector('.modal-next');

    prevBtn.addEventListener('click', () => {
      if (!galleryImages.length) return;
      galleryIndex = (galleryIndex - 1 + galleryImages.length) % galleryImages.length;
      updateModalImage();
    });

    nextBtn.addEventListener('click', () => {
      if (!galleryImages.length) return;
      galleryIndex = (galleryIndex + 1) % galleryImages.length;
      updateModalImage();
    });

    projectCards.forEach(card => {
      card.style.cursor = 'pointer';
      card.addEventListener('click', (e) => {
        if (e.target.closest('a')) return;

        const link = card.getAttribute('data-link');
        const title = card.querySelector('h3')?.textContent || 'Project';
        const imgEl = card.querySelector('img');
        const firstImgSrc = imgEl ? imgEl.src : '';
        const imgAlt = imgEl ? imgEl.alt : '';

        // deskripsi pendek (yang pakai data-lang-id)
        const shortDesc = card.querySelector('p[data-lang-id]')?.innerHTML || '';

        // detail kontribusi (ul.project-detail)
        const detailList = card.querySelector('.project-detail');
        let fullDesc = shortDesc;
        if (detailList) {
          const contribTitle = currentLang === 'id' ? 'Kontribusi utama:' : 'Key contributions:';
          fullDesc += '<hr><strong>' + contribTitle + '</strong><ul>' + detailList.innerHTML + '</ul>';
        }

        // list screenshot dari data-images
        const imagesAttr = card.getAttribute('data-images');
        let images = [];
        if (imagesAttr) {
          images = imagesAttr.split(',').map(s => s.trim()).filter(Boolean);
        }
        if (!images.length && firstImgSrc) {
          images = [firstImgSrc];
        }

        openModal({
          title,
          imgSrc: firstImgSrc,
          imgAlt,
          desc: fullDesc,
          link,
          images,
          externalText: currentLang === 'id' ? 'Buka di tab baru' : 'Open in new tab'
        });
      });

      card.tabIndex = 0;
      card.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') card.click(); });
    });

    // open Gmail compose when user clicks the Email link (prefill recipient)
    const emailLink = document.getElementById('emailLink');
    if (emailLink) {
      emailLink.addEventListener('click', (e) => {
        e.preventDefault();

        const to = 'andratml3@gmail.com';
        const subject = '';
        const body = '';

        const gmailUrl = 'https://mail.google.com/mail/?view=cm&fs=1'
          + '&to=' + encodeURIComponent(to)
          + '&su=' + encodeURIComponent(subject)
          + '&body=' + encodeURIComponent(body);

        window.open(gmailUrl, '_blank', 'noopener');
      });
    }
  </script>

</body>
</html>
